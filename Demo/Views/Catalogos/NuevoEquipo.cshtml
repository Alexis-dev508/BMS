@model Demo.Models.EquiposModelView
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card-info">
				<div class="card-header">
				   <h3>Nuevo Equipo</h3>
			   </div>
                <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                    <form class="form-inline my-2 my-lg-0">
                      <a href="@Url.Action("Equipos","Catalogos")" class="btn btn-outline-info" data-toggle="Regresar" title="Regresar">
						   <i class="fas fa-arrow-alt-circle-left"></i>
						   Regresar
					  </a>
                    </form>
                </nav>
                @using (Html.BeginForm("NuevoEquipo","Catalogos",FormMethod.Post)){
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("equipo","Equipo",new {@class="control-label"})
                            @Html.TextBoxFor(model=> model.equipo,new {@class="form-control",@readonly="readonly"})
                        </div>
                        <div class="form-group m-2">
                            @Html.TextBoxFor(model=> model.nombre,new {@class="form-control",@toggle="Nombre",@title="Nombre"})
                        </div>
                       
                        <div class="form-group m-2">
                            @Html.Label("abreviatura","Abrev",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.abreviatura,new {@class="form-control"})
                        </div>
                        <div class="form-group m-2">
                            @Html.Label("status","Status",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("status",Model.StatusList,new {@class="form-control"})
                        </div>
                        <div class="form-group m-2">
                            <button class="btn btn-outline-primary my-2 my-sm-0" href="#">
                                   <span class="far fa-image"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("marca","Marca",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("marca",Model.MarcasList, new {@class="form-control"})
                        </div>
                       &nbsp;&nbsp;&nbsp;&nbsp;
                       <div class="form-group m-2">
                            @Html.Label("modelo","Modelo",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("modelo",Model.ModelosList,new {@class="form-control"})

                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="form-group m-2">
                            @Html.Label("version","Version",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("version",Model.VersionList, new {@class="form-control"})
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("año","Año",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("año",Model.AnniosList, new {@class="form-control"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="form-group m-2">
                            @Html.Label("serie","Serie",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.serie,new {@class="form-control"})
                            </div>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="form-group m-2">
                            @Html.Label("tipo_equipo","Tipo",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("tipo_equipo",Model.TipoEquipoList, new {@class="form-control"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            </div>
                            <div class="form-group m-1">
                            @Html.Label("uso_equipos","Uso",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("uso_equipos",Model.UsosList, new {@class="form-control"})
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                            <div class="form-group m-2">
                            @Html.Label("cod_estab","Estab.",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("cod_estab",Model.EstabList, new {@class="form-control"})
                            </div>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="form-group m-2">
                            @Html.Label("codigo_economico","CódEco",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.codigo_economico,new {@class="form-control"})
                            </div>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="form-group m-2">
                            @Html.Label("caracteristicas","Características", new {@class = "control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextAreaFor(model=> model.caracteristicas,new {@class="form-control"})
                            </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("odometro","Odómetro",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("odometro",Model.OdometroList, new {@class="form-control"})
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="checkbox m-2">
                            <div class="checkbox">
                               @Html.Label("sirve_odometro","Sirve odómetro",new {@class="control-label"})
                              @Html.CheckBoxFor(model=> model.sirve_odometro,new {@class="form-control"})
                              
                            </div>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="form-group m-2">
                            @Html.Label("color","Color",new {@class="control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("color",Model.ColorList, new {@class="form-control"})
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("activo_fijo","Activo Fijo", new {@class = "control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.activo_fijo,new {@class="form-control",@onkeydown="onKeyDownActivo(event);",@id="activo"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @*@Html.TextBoxFor(model=> model.descripcion,new {@class="form-control"})*@
                            <input asp-for="activo_nombre" class="form-control" id="anombre" data-toggle="Nombre Activo fijo" title="Nombre Activo fijo"/>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="checkbox m-2">
                         <div class="checkbox">
                              <label>
                                <input type="checkbox" id="cbFijo" value="option1"> Activo Fijo
                              </label>
                             </div>
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            @Html.Label("equipo_depende","Depende", new {@class = "control-label"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.equipo_depende,new {@class="form-control",@onkeydown="onKeyDownDepende(event);",@id="depende"})
                            &nbsp;&nbsp;&nbsp;&nbsp;
                             <input asp-for="depende" class="form-control" id="dnombre" data-toggle="Depende Equipo" title="Depende Equipo"/>
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                           <b>Vida útil 1: @Html.TextBoxFor(model=> model.vida_util,new {@class="form-control"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("medida_vida_util",Model.FrecuenciaList, new {@class="form-control"})
                                &nbsp;&nbsp;&nbsp;&nbsp;
                           <b> Garantía 1: @Html.TextBoxFor(model=> model.garantia,new {@class="form-control"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("medida_garantia",Model.FrecuenciaList, new {@class="form-control"})
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.Label("lote","Lote", new {@class = "control-label"})
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.TextBoxFor(model=> model.lote,new {@class="form-control"})
                         </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                           <b>Vida útil 2: @Html.TextBoxFor(model=> model.vida_util2,new {@class="form-control"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("medida_vida_util2",Model.FrecuenciaList, new {@class="form-control"})
                                &nbsp;&nbsp;&nbsp;&nbsp;
                           <b> Garantía 2: @Html.TextBoxFor(model=> model.garantia2,new {@class="form-control"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                            @Html.DropDownList("medida_garantia2",Model.FrecuenciaList, new {@class="form-control"})
                                &nbsp;&nbsp;&nbsp;&nbsp;
                         </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            <b>Área @Html.TextBoxFor(model=> model.area,new {@class="form-control",@id="area",@onkeydown="onKeyDownArea(event);"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                             <input id="areanombre" style="max-width: 8vw;" data-toggle="Area" title="Area">
                                &nbsp;&nbsp;&nbsp;&nbsp;
                               <b>Recorrido máximo: @Html.TextBoxFor(model=> model.recorrido_maximo,new {@class="form-control"})</b> 
                        </div>
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <div class="form-group m-2">
                            <b>Depto. @Html.TextBoxFor(model=> model.departamento,new {@class="form-control",@onkeydown="onKeyDownDepart(event);",@id="departamento"})</b> 
                                &nbsp;&nbsp;&nbsp;&nbsp;
                             <input id="departnombre" style="max-width: 8vw;" data-toggle="Nombre Departamento" title="Nombre Departamento">
                       </div>
                    </div>
                </div>
            <div class="form-group">
                <input type="submit" value="Guardar" class="btn btn-success"/>
            </div>
            }
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark" content></nav>
            </div>
            <div class="text-danger">
            @if(ViewBag.Errores != null)
                    {
                        @ViewBag.Errores
            }
        </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-xl" id="modalDetalle" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="datos">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<script>
function buscar()
        {
            const tableReg = document.getElementById('tabla');
            const searchText = document.getElementById('busqueda').value.toLowerCase();
            let total = 0;
            for (let i = 1; i < tableReg.rows.length; i++) {
                if (tableReg.rows[i].classList.contains("noSearch")) {
                    continue;
                }
                let found = false;
                const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');
                for (let j = 0; j < cellsOfRow.length && !found; j++) {
                    const compareWith = cellsOfRow[j].innerHTML.toLowerCase();
                    if (searchText.length == 0 || compareWith.indexOf(searchText) > -1) {
                        found = true;
                        total++;
                    }
                }
                if (found) {
                    tableReg.rows[i].style.display = '';
                } else {
                    tableReg.rows[i].style.display = 'none';
                }
            }
            const lastTR=tableReg.rows[tableReg.rows.length-1];
            const td=lastTR.querySelector("td");
            lastTR.classList.remove("hide", "red");
            if (searchText == "") {
                lastTR.classList.add("hide");
            }
        }
$(document).ready( function () {
    $('#tabla').DataTable();
} );

function detalleActivo(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("detalleActivos","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
function equipoDepende(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("EquipoDepende","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
function areaEquipo(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("Areas","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
function departEquipos(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("Departamentos","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
function activosFi(activo,nombre){
    $('#activo').val(activo);
    $('#anombre').val(nombre);
    $('#modalDetalle').modal('hide');
}
function equipoDep(equipo,nombre){
    $('#depende').val(equipo);
    $('#dnombre').val(nombre);
    $('#modalDetalle').modal('hide');
}
function areaEq(area,nombre){
    $('#area').val(area);
    $('#areanombre').val(nombre);
    $('#modalDetalle').modal('hide');
}
function departEq(depart,nombre){
    $('#departamento').val(depart);
    $('#departnombre').val(nombre);
    $('#modalDetalle').modal('hide');
}
function onKeyDownActivo(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      detalleActivo();
    }
 
}
function onKeyDownArea(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      areaEquipo();
    }
 
}
function onKeyDownDepende(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      equipoDepende();
    }
 
}
function onKeyDownDepart(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      departEquipos();
    }
 
}
</script>
@*<div class="container-fluid">
    @Html.Partial("Prueba")
</div>*@




