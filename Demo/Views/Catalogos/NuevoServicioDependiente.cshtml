@model Demo.Models.ServicioDep
<div class="container-fluid">
<div class="row">
<div class="col-sm-12">
<div class="row">
@using (Html.BeginForm("NuevoServicioDependiente","Catalogos",FormMethod.Post)){
    <div class="col-12">
        
         @Html.Label("servicio","Servicio",new {@class="control-label"})
         &nbsp;&nbsp;&nbsp;&nbsp;
         <div class="input-group">
           @Html.TextBoxFor(model=> model.servicio,new {@class="form-control",@type="text",@onkeydown="onKeyDownServ1(event)",@id="servicio",@required="true"})
            <span class="input-group-btn">
                <a class="btn btn-primary" onclick="servicio()" data-toggle="Buscar" title="Buscar">
                    <i class="fas fa-search"></i>
			    </a>
            </span>
         </div>
      
         
         &nbsp;&nbsp;&nbsp;&nbsp;
         @Html.TextBoxFor(model=> model.nom_servicio,new {@class="form-control",@type="text",@id="nombre"})
         
      </div>
    <div class="col-12">
        <br />
       @Html.Label("servicio_dependiente","Dependiente",new {@class="control-label"})
         <div class="input-group">
            @Html.TextBoxFor(model=> model.servicio_dependiente,new {@class="form-control",@type="text",@onkeydown="onKeyDownServ(event)",@id="depende",@required="true"})
            <span class="input-group-btn">
                <a class="btn btn-primary" onclick="servicioDepende()" data-toggle="Buscar" title="Buscar">
                    <i class="fas fa-search"></i>
			    </a>
            </span>
         </div>
        @Html.Label("notas","Notas",new {@class="control-label"})
        @Html.TextAreaFor(model=> model.notas,new {@class="form-control",@type="text",@required="true"})
        &nbsp;&nbsp;&nbsp;&nbsp;
        <div class="form-group">
            <input type="submit" value="Guardar" class="btn btn-success "/>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <a href="@Url.Action("ServiciosDep","Catalogos")" class="btn btn-outline-info" data-toggle="Regresar" title="Regresar">
						   <i class="fas fa-arrow-alt-circle-left"></i>
						   Regresar
					  </a>
        </div>
    </div>
    }
</div>
</div>
</div>
</div>
<div class="modal fade bd-example-modal-xl" id="modalDetalle" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="datos">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
<script>
//muestra modal de servicios depende
    function servicioDepende(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("ServiciosDepende","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
    //muestra modal de servicios
        function servicio(){
        $("#datos").empty();
        $.ajax({
            type:"GET",
            url:"@Url.Action("Serv","Catalogos")",
            success:function(data){
                $("#datos").append(data);
                $('#modalDetalle').modal('show');
            },
            error: function (xhr,ajaxOptions,thrownError){alert(xhr.responseText);}
        });
    }
    //valida F2
 function onKeyDownServ(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      servicioDepende();
    }
 
}
function onKeyDownServ1(event) {

    var codigo = event.which || event.keyCode;
     
    if(codigo === 113){
      servicio();
    }
 
}
//asigna valores seleccionados y cierra el modal
function serv(servicio,n){
    var n = n; //quitarlo
    $('#depende').val(servicio);
    $('#modalDetalle').modal('hide');
}
function serv1(servicio,nombre){
    $('#servicio').val(servicio);
    $('#nombre').val(nombre);
    $('#modalDetalle').modal('hide');
}
</script>
